{% extends 'base.html' %}
{% block title %}
    Lista de Festivales
{% endblock %}

{% block content %}
<div class="row">
    <div class="col">
      <div class="svg-container">
        <svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="svg616206" viewBox="0 200 1024 400" width="100%" version="1.1">
            <metadata id="metadata616212">
                <rdf:rdf>
                    <cc:work rdf:about="">
                        <dc:format>image/svg+xml</dc:format>
                        <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"></dc:type>
                    </cc:work>
                </rdf:rdf>
            </metadata>
            <defs id="defs616210"></defs>
            <linearGradient spreadMethod="pad" y2="30%" x2="-10%" y1="120%" x1="30%" id="3d_gradient2-logo-57e1f94a-84a4-46b2-9cc5-eb5d6f1c87b3">
                <stop id="stop616187" stop-opacity="1" stop-color="#ffffff" offset="0%"></stop>
                <stop id="stop616189" stop-opacity="1" stop-color="#000000" offset="100%"></stop>
            </linearGradient>
            <linearGradient gradientTransform="rotate(-30)" spreadMethod="pad" y2="30%" x2="-10%" y1="120%" x1="30%" id="3d_gradient3-logo-57e1f94a-84a4-46b2-9cc5-eb5d6f1c87b3">
                <stop id="stop616192" stop-opacity="1" stop-color="#ffffff" offset="0%"></stop>
                <stop id="stop616194" stop-opacity="1" stop-color="#cccccc" offset="50%"></stop>
                <stop id="stop616196" stop-opacity="1" stop-color="#000000" offset="100%"></stop>
            </linearGradient>
            <g id="logo-group">
                <image xlink:href="" id="container" x="272" y="144" width="480" height="480" style="display: none;" transform="translate(0 0)"></image>
                <g id="logo-center" transform="translate(-1.1368683772161603e-13 0)">
                    <image xlink:href="" id="icon_container" style="display: none;" x="0" y="0"></image>
                <g id="title" style="font-style:normal;font-weight:700;font-size:72px;line-height:1;font-family:'Brandmark1 Bold';font-variant-ligatures:normal;text-align:center;text-anchor:middle" transform="translate(0 0)">
                  <path id="path616291" style="font-style:normal;font-weight:700;font-size:72px;line-height:1;font-family:'Brandmark1 Bold';font-variant-ligatures:normal;text-align:center;text-anchor:middle" d="M 322.45662,-53.64 V 2.52 h 11.304 v -21.744 h 25.632 v -10.728 h -25.632 v -12.96 h 25.632 V -53.64 Z" stroke-width="0" stroke-linejoin="miter" stroke-miterlimit="2" fill="#fcfcfc" stroke="#fcfcfc" transform="translate(0 281.4406525) translate(337.95226249999996 57.2756) scale(0.91) translate(-322.45662 53.64)"></path>
                  <path id="path616293" style="font-style:normal;font-weight:700;font-size:72px;line-height:1;font-family:'Brandmark1 Bold';font-variant-ligatures:normal;text-align:center;text-anchor:middle" d="m 377.75038,2.736 c 2.88,0 5.61599,-0.576 8.20799,-1.656 2.44801,-1.152 4.68,-2.664 6.552,-4.68 l -7.56,-7.2 c -1.872,2.016 -4.464,3.096 -7.19999,3.096 -3.52801,0 -6.55201,-1.8 -8.35201,-4.608 h 28.656 v -5.184 c 0,-5.472 -2.088,-10.512 -5.976,-14.4 -3.81599,-3.816 -8.928,-5.904 -14.32799,-5.904 -5.40001,0 -10.512,2.088 -14.32801,5.904 -3.81599,3.888 -5.976,8.928 -5.976,14.4 0,5.4 2.16001,10.512 5.976,14.328 3.81601,3.816 8.928,5.904 14.32801,5.904 z m 8.35199,-25.488 h -16.704 c 1.8,-2.736 4.824,-4.608 8.35201,-4.608 3.52799,0 6.62399,1.872 8.35199,4.608 z" stroke-width="0" stroke-linejoin="miter" stroke-miterlimit="2" fill="#fcfcfc" stroke="#fcfcfc" transform="translate(0 281.4406525) translate(369.792935 71.69) scale(0.91) translate(-357.44637 37.8)"></path>
                  <path id="path616295" style="font-style:normal;font-weight:700;font-size:72px;line-height:1;font-family:'Brandmark1 Bold';font-variant-ligatures:normal;text-align:center;text-anchor:middle" d="m 398.61125,2.952 h 16.848 c 7.272,0 13.176,-5.904 13.176,-13.176 0,-7.272 -5.904,-13.248 -13.176,-13.248 h -3.024 c -1.008,0 -1.872,-0.792 -1.872,-1.872 0,-1.008 0.864,-1.872 1.872,-1.872 h 15.048 V -38.52 h -15.048 c -7.272,0 -13.176,5.904 -13.176,13.176 0,7.272 5.904,13.176 13.176,13.176 h 3.024 c 1.008,0 1.872,0.864 1.872,1.944 0,1.008 -0.792,1.872 -1.872,1.872 h -16.848 z" stroke-width="0" stroke-linejoin="miter" stroke-miterlimit="2" fill="#fcfcfc" stroke="#fcfcfc" transform="translate(0 281.4406525) translate(407.2529758 71.03479999999999) scale(0.91) translate(-398.61125 38.52)"></path>
                  <path id="path616297" style="font-style:normal;font-weight:700;font-size:72px;line-height:1;font-family:'Brandmark1 Bold';font-variant-ligatures:normal;text-align:center;text-anchor:middle" d="m 443.57525,-19.008 v -8.496 h 11.448 v -10.08 h -11.448 v -12.888 l -10.8,3.6 v 27.864 c 0,3.024 0.576,5.976 1.728,8.712 1.152,2.664 2.736,5.04 4.824,7.056 2.016,2.016 4.392,3.672 7.056,4.752 2.736,1.152 5.616,1.728 8.64,1.728 v -10.8 c -6.336,0 -11.448,-5.112 -11.448,-11.448 z" stroke-width="0" stroke-linejoin="miter" stroke-miterlimit="2" fill="#fcfcfc" stroke="#fcfcfc" transform="translate(0 281.4406525) translate(438.3422158000001 60.15848) scale(0.91) translate(-432.77525 50.472)"></path>
                  <path id="path616299" style="font-style:normal;font-weight:700;font-size:72px;line-height:1;font-family:'Brandmark1 Bold';font-variant-ligatures:normal;text-align:center;text-anchor:middle" d="M 458.14963,-35.424 V 2.52 h 10.87199 v -41.544 z" stroke-width="0" stroke-linejoin="miter" stroke-miterlimit="2" fill="#fcfcfc" stroke="#fcfcfc" transform="translate(0 281.4406525) translate(461.43290160000004 70.57616) scale(0.91) translate(-458.14963 39.024)"></path>
                  <path id="path616301" style="font-style:normal;font-weight:700;font-size:72px;line-height:1;font-family:'Brandmark1 Bold';font-variant-ligatures:normal;text-align:center;text-anchor:middle" d="m 470.25575,-37.584 16.272,40.104 h 9.072 l 16.272,-40.104 h -11.736 l -9,23.256 -9.072,-23.256 z" stroke-width="0" stroke-linejoin="miter" stroke-miterlimit="2" fill="#fcfcfc" stroke="#fcfcfc" transform="translate(0 281.4406525) translate(472.44947080000003 71.88656) scale(0.91) translate(-470.25575 37.584)"></path>
                  <path id="path616303" style="font-style:normal;font-weight:700;font-size:72px;line-height:1;font-family:'Brandmark1 Bold';font-variant-ligatures:normal;text-align:center;text-anchor:middle" d="m 548.96525,-38.016 h -10.8 v 2.232 c -2.808,-1.44 -5.976,-2.232 -9.216,-2.232 -2.808,0 -5.472,0.576 -7.992,1.656 -2.448,1.008 -4.68,2.52 -6.552,4.392 -1.872,1.872 -3.384,4.032 -4.392,6.48 -1.08,2.592 -1.584,5.256 -1.584,7.992 0,2.808 0.504,5.472 1.584,7.992 1.008,2.448 2.52,4.68 4.392,6.552 1.872,1.872 4.104,3.384 6.552,4.392 2.52,1.08 5.184,1.584 7.992,1.584 3.168,0 6.408,-0.72 9.216,-2.16 V 2.52 h 10.8 z m -15.12,28.944 c -1.512,0.864 -3.168,1.296 -4.896,1.296 -5.4,0 -9.72,-4.32 -9.72,-9.72 0,-5.328 4.32,-9.72 9.72,-9.72 1.872,0 3.672,0.576 5.256,1.584 1.512,1.008 2.736,2.376 3.528,4.032 0.576,1.296 0.864,2.664 0.864,4.176 0,1.656 -0.432,3.384 -1.296,4.824 -0.792,1.44 -2.016,2.664 -3.456,3.528 z" stroke-width="0" stroke-linejoin="miter" stroke-miterlimit="2" fill="#fcfcfc" stroke="#fcfcfc" transform="translate(0 281.4406525) translate(507.1873558000001 71.49343999999999) scale(0.91) translate(-508.42925 38.016)"></path>
                  <path id="path616305" style="font-style:normal;font-weight:700;font-size:72px;line-height:1;font-family:'Brandmark1 Bold';font-variant-ligatures:normal;text-align:center;text-anchor:middle" d="M 554.61838,-51.912 V 2.52 h 10.87199 v -58.032 z" stroke-width="0" stroke-linejoin="miter" stroke-miterlimit="2" fill="#fcfcfc" stroke="#fcfcfc" transform="translate(0 281.4406525) translate(549.2194641000001 55.57208) scale(0.91) translate(-554.61838 55.512)"></path>
                  <path id="path616307" style="font-style:normal;font-weight:700;font-size:72px;line-height:1;font-family:'Brandmark1 Bold';font-variant-ligatures:normal;text-align:center;text-anchor:middle" d="M 605.6045,-18.936 V 2.52 h 11.304 v -56.16 h -11.304 v 23.976 h -21.672 V -53.64 h -11.304 V 2.52 h 11.304 v -21.456 z" stroke-width="0" stroke-linejoin="miter" stroke-miterlimit="2" fill="#dc2963" stroke="#dc2963" transform="translate(0 281.4406525) translate(565.6086733000002 57.2756) scale(0.91) translate(-572.6285 53.64)"></path>
                  <path id="path616309" style="font-style:normal;font-weight:700;font-size:72px;line-height:1;font-family:'Brandmark1 Bold';font-variant-ligatures:normal;text-align:center;text-anchor:middle" d="m 640.79112,2.952 c 4.75201,0 9.288,-1.872 12.672,-5.256 3.456,-3.384 5.328,-7.92 5.328,-12.744 v -22.536 h -10.8 v 22.536 c 0,4.032 -3.24,7.2 -7.2,7.2 -4.03199,0 -7.19999,-3.168 -7.19999,-7.2 v -22.536 h -10.80001 v 22.536 c 0,4.824 1.87201,9.36 5.25601,12.744 3.38399,3.384 7.91999,5.256 12.74399,5.256 z" stroke-width="0" stroke-linejoin="miter" stroke-miterlimit="2" fill="#dc2963" stroke="#dc2963" transform="translate(0 281.4406525) translate(611.2566575000002 71.88656) scale(0.91) translate(-622.79112 37.584)"></path>
                  <path id="path616311" style="font-style:normal;font-weight:700;font-size:72px;line-height:1;font-family:'Brandmark1 Bold';font-variant-ligatures:normal;text-align:center;text-anchor:middle" d="m 704.97912,-17.568 c 0,-2.736 -0.50399,-5.472 -1.584,-7.992 -1.08,-2.448 -2.51999,-4.608 -4.392,-6.48 -1.872,-1.944 -4.10399,-3.384 -6.55199,-4.392 -2.52001,-1.08 -5.18401,-1.656 -7.99201,-1.656 -2.736,0 -5.472,0.576 -7.992,1.656 -0.576,0.216 -1.152,0.504 -1.728,0.792 v -20.448 l -10.8,3.6 v 34.92 c 0,2.808 0.576,5.472 1.58401,7.992 1.07999,2.448 2.52,4.68 4.39199,6.552 1.944,1.872 4.10401,3.384 6.552,4.392 2.52,1.08 5.256,1.584 7.992,1.584 2.736,0 5.472,-0.504 7.99201,-1.584 2.448,-1.08 4.60799,-2.52 6.55199,-4.392 1.87201,-1.872 3.312,-4.104 4.392,-6.552 1.08001,-2.52 1.584,-5.184 1.584,-7.992 z m -10.8,0 c 0,5.4 -4.39199,9.72 -9.72,9.72 -5.328,0 -9.72,-4.32 -9.72,-9.72 0,-5.328 4.392,-9.72 9.72,-9.72 5.32801,0 9.72,4.392 9.72,9.72 z" stroke-width="0" stroke-linejoin="miter" stroke-miterlimit="2" fill="#dc2963" stroke="#dc2963" transform="translate(0 281.4406525) translate(648.7013375000002 55.04792) scale(0.91) translate(-663.93912 56.088)"></path>
                </g>
                <image xlink:href="" id="icon" style="display: none;" x="0" y="0"></image>
              </g>
            </g>
          </svg>
        </div>
      </div>
    </div>
    <h2>Encuentra tu próxima experiencia:</h2>
        <form action="" method="GET">
            {% csrf_token %}
            {{ form.as_p }}
            <input type="submit" value="Filtrar" class="btn btn-primary mt-3 ">
            <button type="submit" class="btn btn-secondary mt-3" onclick="limpiarFiltros()" >Limpiar filtros</button>

        </form>
        <h2 class="mt-5 mb-4">Próximos Festivales:</h2>
        <div class="row row-cols-1 row-cols-md-2 g-4">
            {% for festival in festivalesFuturos %}
            <div class="col card_transicion">
                <div class="card h-100" style="background-color: #24243e; border-radius: 10px; border: none;">
                    <img src="{{ festival.foto.url }}" class="card-img-top img-fluid rounded-top" alt="Concierto Image" style="border-top-left-radius: 10px; border-top-right-radius: 10px;">
                    <div class="card-body">
                        <h5 class="card-title text-white">{{ festival.nombre }}</h5>
                        <p class="card-text text-white mb-1"><i class="bi bi-calendar"></i> Fecha: {{ festival.fecha }}</p>
                        <p class="card-text text-white mb-1"><i class="bi bi-geo-alt"></i> Ubicación: {{ festival.ubicacion_festival }}</p>
                        <a href="{% url 'festival_detail' pk=festival.pk %}" class="btn btn-primary"><i class="bi bi-info-circle"></i> Detalles</a>
                        {% if user.is_staff %}
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>


        {% if user.is_staff %}
        <div class="col-12 my-5">
            <div class="alert alert-warning" role="alert">
                <i class="bi bi-shield-lock"></i> Eres administrador. Puedes visualizar los festivales pasados:
            </div>
        </div>
        <h2 class="mb-4">Festivales pasados:</h2>
        <div class="row row-cols-1 row-cols-md-2 g-4">
            {% for festival in festivalesPasados %}
            <div class="col card_transicion">
                <div class="card h-100" style="background-color: #24243e; border-radius: 10px; border: none;">
                    <img src="{{ festival.foto.url }}" class="card-img-top img-fluid rounded-top" alt="Concierto Image" style="border-top-left-radius: 10px; border-top-right-radius: 10px;">
                    <div class="card-body">
                        <h5 class="card-title text-white">{{ festival.nombre }}</h5>
                        <p class="card-text text-white mb-1"><i class="bi bi-calendar"></i> Fecha: {{ festival.fecha }}</p>
                        <p class="card-text text-white mb-1"><i class="bi bi-geo-alt"></i> Ubicación: {{ festival.ubicacion_festival }}</p>

                        {% if user.is_staff %}
                        <a href="{% url 'festival_detail' pk=festival.pk %}" class="btn btn-primary"><i class="bi bi-info-circle"></i> Detalles</a>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        <a href="{% url 'festival_create' %}" class="btn btn-primary mt-5"><i class="bi bi-plus"></i> Añadir Festival</a>
        <br>
        {% endif %}
        <div class="row">
            <div class="col">
                <a href="{% url 'listar_festivales_mas_vendidos' %}" class="btn btn-primary mt-5"><i class="bi bi-star"></i> Festivales Más Vendidos</a>
            </div>
        </div>
    </div>
</div>


<script>
    function limpiarFiltros() {
        let inputs = document.getElementsByTagName('input');
        let selects = document.getElementsByTagName('select');

        for (let i = 0; i < inputs.length; i++) {
            if (inputs[i].type !== 'submit' && inputs[i].type !== 'reset') {
                inputs[i].value = '';
            }
        }
        for (let i = 0; i < selects.length; i++) {
            selects[i].selectedIndex = 0;
        }
    }
</script>

{% endblock %}
